#include<string.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<fcntl.h>
#include<stdio.h>
#include<unistd.h>
#include<errno.h>
int main(int argc,char *argv[])
{
    
   char buf[1024] = "";
   int fd = open("/dev/tty",O_RDONLY);
   if(fd< 0)
     {
      perror("open");
     }
   printf("fd = %d\n",fd);
   int flag = fcntl(fd,F_GETFL);
   flag |= O_NONBLOCK;
   fcntl(fd,F_SETEL,flag);
   int ret = read(fd,buf,sizeof(buf)); 
   printf("ret = %d\n",ret);
   if(ret < 0)
   {
    if(errno == EAGAIN)
     {
       printf("缓冲区无数据\n");
      }
     else
     {
      perror(" ");  
      return 0;
     }
   }
  printf("buf = %s\n",buf);  
   close(fd);
      return 0;
}
